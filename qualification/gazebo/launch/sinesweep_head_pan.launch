<launch>
  <!-- Gazebo and robot -->
  <include file="$(find qualification)/gazebo/robots/pr2_robot.launch" />

  <group ns="test_controller" clear_params="true">
    <param name="type" type="string" value="SineSweepController" />
    <param name="joint_name" type="string" value="head_pan_joint" />

    <!-- Analysis params -->
    <param name="first_mode" type="double" value="64" />
    <param name="second_mode" type="double" value="77" />
    <param name="error_tolerance" type="double" value="0.10" />
    
    <!-- Sine sweep params -->
    <param name="amplitude" type="double" value="5.0" />
    <param name="start_freq" type="double" value="5.0" />
    <param name="end_freq" type="double" value="100.0" />
    <param name="duration" type="double" value="10.0" />
  
  </group>
  
  <node pkg="pr2_controller_manager" type="spawner"
        name="sinesweep_spawner" args="test_controller" />
  <node pkg="qualification" type="hysteresis_sinesweep_plot.py"
        name="hyst_analysis" />

  <!-- Test: asserts we have result service and that we passed or human'd -->
  <test type="qual_unittest.py"  pkg="qualification" name="test_sinesweep"
        args="--human_ok" test-name="pr2_sinesweep" time-limit="600" />

</launch>
