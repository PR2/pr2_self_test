<launch>
  <!-- Gazebo and robot -->
  <include file="$(find qualification)/gazebo/robots/pr2_robot.launch" />

  <!-- Checkout analysis -->
  <node pkg="qualification" type="robot_checkout.py" name="robot_checkout" />

  <!-- Overrides visual verifier -->
  <node pkg="qualification" type="visual_ok.py" name="visual_ok" />

  <!-- Publishes diagnostics for checkout script -->
  <node pkg="pr2_controller_manager" type="joints_to_diagnostics.py" name="joint_diag" />
  
  <!-- Checkout controller -->
  <group ns="test_controller" clear_params="true">
    <param name="type" type="string" value="CheckoutController" />
    <param name="timeout" type="double" value="60.0" />
  </group>
  <node pkg="pr2_controller_manager" type="spawner"
        args="test_controller" name="pr2_chk_ctrl" />

  <!-- Test: asserts we have checkout service and that we passed -->
  <test test-name="pr2_checkout" pkg="qualification" name="test_checkout"
        type="qual_unittest.py" time-limit="600" />
</launch>
